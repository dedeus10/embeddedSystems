<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.15"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>RealTime_Home: Quick Start Guide for AT25DFx SerialFlash Driver</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
  $(document).ready(initResizable);
/* @license-end */</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">RealTime_Home
   &#160;<span id="projectnumber">2.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.15 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('asfdoc_common2_at25dfx_basic_use.html','');});
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">Quick Start Guide for AT25DFx SerialFlash Driver </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>This quick start will read, unprotect, erase and write bytes to an AT25DF081A that is connected to the SPI interface on EXT1 header of SAM D20 Xplained Pro or EXT3 of SAM D21 Xplained Pro.</p>
<p>The SERCOM SPI will be configured with the following settings:</p>
<p>For SAM D20 Xplained Pro</p><ul>
<li>500 kHz baud rate</li>
<li>SCK, MISO and MOSI on EXT1 header's SPI pins</li>
</ul>
<p>For SAM D21 Xplained Pro</p><ul>
<li>120 kHz baud rate</li>
<li>SCK, MISO and MOSI on EXT3</li>
</ul>
<p>The AT25DFx driver instance will be configured with the following settings:</p>
<p>For SAM D20 Xplained Pro</p><ul>
<li>CS on EXT1 header's SS0 pin</li>
</ul>
<p>For SAM D21 Xplained Pro</p><ul>
<li>CS on EXT3 PA13</li>
</ul>
<h1><a class="anchor" id="asfdoc_common2_at25dfx_basic_setup"></a>
Setup</h1>
<h2><a class="anchor" id="asfdoc_common2_at25dfx_basic_prereq"></a>
Prerequisites</h2>
<p>There are no special setup requirements for this use-case.</p>
<h2><a class="anchor" id="asfdoc_common2_at25dfx_basic_setup_code"></a>
Code</h2>
<p>Add to the main application source file, outside of any functions: </p><div class="fragment"></div><!-- fragment --><div class="fragment"></div><!-- fragment --><p> Create a new function for initializing the AT25DFx: </p><div class="fragment"></div><!-- fragment --><p> If not already present, add to the initialization code: </p><div class="fragment"></div><!-- fragment --><h2><a class="anchor" id="asfdoc_common2_at25dfx_basic_setup_flow"></a>
Workflow</h2>
<ol type="1">
<li>Create read and write buffers. <div class="fragment"></div><!-- fragment --></li>
<li>Create global instances of SPI and AT25DFx chip. <div class="fragment"></div><!-- fragment --></li>
<li>Create a function to contain the AT25DFx initialization code.</li>
<li>Create local instances of SPI and AT25DFx configurations. <div class="fragment"></div><!-- fragment --></li>
<li>Initialize the SPI for AT25DFx connected to EXT1 header. <div class="fragment"></div><!-- fragment --></li>
<li>Initialize the AT25DFx instance for AT25DF081A, with Slave Select on the SS_0 pin on EXT1. <div class="fragment"></div><!-- fragment --></li>
</ol>
<h1><a class="anchor" id="asfdoc_common2_at25dfx_basic_use_case"></a>
Use Case</h1>
<h2><a class="anchor" id="asfdoc_common2_at25dfx_basic_use_case_code"></a>
Code</h2>
<p>Copy into main application: </p><div class="fragment"></div><!-- fragment --><h2><a class="anchor" id="asfdoc_common2_at25dfx_basic_use_case_flow"></a>
Workflow</h2>
<ol type="1">
<li>Wakeup serialFlash. <div class="fragment"></div><!-- fragment --></li>
<li>Check that the SerialFlash is present. <div class="fragment"></div><!-- fragment --></li>
<li>Read out the first AT25DFX_BUFFER_SIZE bytes, starting at the very first flash address. <div class="fragment"></div><!-- fragment --></li>
<li>Disable protection of the second sector. <dl class="section note"><dt>Note</dt><dd>This device has sectors with a uniform size of 64 kB, so the address <code>0x10000</code> marks the start of the second sector. This can differ between devices.</dd></dl>
<div class="fragment"></div><!-- fragment --></li>
<li>Erase the first 4 kB of the second 64 kB block (64-68 kB range). <div class="fragment"></div><!-- fragment --></li>
<li>Write AT25DFX_BUFFER_SIZE bytes, starting at the beginning of the sector and the newly erased memory locations. <div class="fragment"></div><!-- fragment --></li>
<li>Enable protection of all sectors, to prevent accidental erases of content. <div class="fragment"></div><!-- fragment --></li>
<li>Put SerialFlash device to sleep, to conserve power. <div class="fragment"></div><!-- fragment --></li>
</ol>
</div></div><!-- PageDoc -->
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="asfdoc_common2_at25dfx_exqsg.html">Examples for AT25DFx SerialFlash Driver</a></li>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.15 </li>
  </ul>
</div>
</body>
</html>
