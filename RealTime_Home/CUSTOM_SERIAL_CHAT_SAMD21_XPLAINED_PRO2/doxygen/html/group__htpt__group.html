<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.15"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>RealTime_Home: HTPT APIs</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
  $(document).ready(initResizable);
/* @license-end */</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">RealTime_Home
   &#160;<span id="projectnumber">2.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.15 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('group__htpt__group.html','');});
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">HTPT APIs</div>  </div>
</div><!--header-->
<div class="contents">

<p>This group includes all HTPT APIs; Database Creation, Send Temperature, ...  
<a href="#details">More...</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ga2f9864d034b157d76216d1b7284b568b"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__error__codes__group.html#ga3b1db9b95feb157b3c188ca27fe76988">at_ble_status_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__htpt__group.html#ga2f9864d034b157d76216d1b7284b568b">at_ble_htpt_create_db</a> (<a class="el" href="at__ble__api_8h.html#af0538ef74570e97a4abdcc7263fdfcdd">at_ble_htpt_db_config_flag</a> features, <a class="el" href="at__ble__api_8h.html#a236445568b928ababcce95965c981348">at_ble_htpt_temp_type</a> temp_type, uint16_t valid_range_min, uint16_t valid_range_max, uint16_t meas_intv, <a class="el" href="at__ble__api_8h.html#a3da24809ec703fda904a0a3b4c85e350">at_ble_htpt_sec_level</a> sec_lvl, <a class="el" href="at__ble__api_8h.html#abd23646d0c662860741f787efc8456f2">at_ble_handle_t</a> *start_handle)</td></tr>
<tr class="memdesc:ga2f9864d034b157d76216d1b7284b568b"><td class="mdescLeft">&#160;</td><td class="mdescRight">This API message shall be used to add an instance of the Health Thermometer service into the database. This should be done during the initialization phase of the device , this is a blocking call and no events will be returned.  <a href="#ga2f9864d034b157d76216d1b7284b568b">More...</a><br /></td></tr>
<tr class="separator:ga2f9864d034b157d76216d1b7284b568b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga1bac2afa579331c8bf3a7bf3715f4079"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__error__codes__group.html#ga3b1db9b95feb157b3c188ca27fe76988">at_ble_status_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__htpt__group.html#ga1bac2afa579331c8bf3a7bf3715f4079">at_ble_htpt_enable</a> (<a class="el" href="at__ble__api_8h.html#abd23646d0c662860741f787efc8456f2">at_ble_handle_t</a> conn_handle, <a class="el" href="at__ble__api_8h.html#ae35b76480ab773fe13f5dfb9f78a4b28">at_ble_htpt_ntf_ind_cfg</a> ntf_ind_cfg)</td></tr>
<tr class="memdesc:ga1bac2afa579331c8bf3a7bf3715f4079"><td class="mdescLeft">&#160;</td><td class="mdescRight">This API message can be used after the connection with a peer device has been established in order to restore known device bond data, in response a <a class="el" href="at__ble__api_8h.html#a3324640b95f33169515f89738ed5baeba0217704aaf8283258dd02858769e6008">AT_BLE_HTPT_ENABLE_RSP</a> event should be received.  <a href="#ga1bac2afa579331c8bf3a7bf3715f4079">More...</a><br /></td></tr>
<tr class="separator:ga1bac2afa579331c8bf3a7bf3715f4079"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga4979577ecfab6b25dc76e2a448c65b37"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__error__codes__group.html#ga3b1db9b95feb157b3c188ca27fe76988">at_ble_status_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__htpt__group.html#ga4979577ecfab6b25dc76e2a448c65b37">at_ble_htpt_temp_send</a> (uint32_t temp, <a class="el" href="structat__ble__prf__date__time__t.html">at_ble_prf_date_time_t</a> *time_stamp, <a class="el" href="at__ble__api_8h.html#accb2a3740dd79da6ab168adfa69c9548">at_ble_htpt_temp_flags</a> flags, <a class="el" href="at__ble__api_8h.html#a236445568b928ababcce95965c981348">at_ble_htpt_temp_type</a> type, <a class="el" href="group__group__sam0__utils.html#ga97a80ca1602ebf2303258971a2c938e2">bool</a> flag_stable_meas)</td></tr>
<tr class="memdesc:ga4979577ecfab6b25dc76e2a448c65b37"><td class="mdescLeft">&#160;</td><td class="mdescRight">This message is used by the application (which handles the temperature device driver and measurements) to send a temperature measurement through the Thermometer role. In response a <a class="el" href="at__ble__api_8h.html#a3324640b95f33169515f89738ed5baeba918f0b91ca899278bb08d41cf98cb005">AT_BLE_HTPT_TEMP_SEND_CFM</a> event should be received.  <a href="#ga4979577ecfab6b25dc76e2a448c65b37">More...</a><br /></td></tr>
<tr class="separator:ga4979577ecfab6b25dc76e2a448c65b37"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga2808738edb6dbd353e562b235a4d10a6"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__error__codes__group.html#ga3b1db9b95feb157b3c188ca27fe76988">at_ble_status_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__htpt__group.html#ga2808738edb6dbd353e562b235a4d10a6">at_ble_htpt_meas_intv_update</a> (uint16_t meas_intv)</td></tr>
<tr class="memdesc:ga2808738edb6dbd353e562b235a4d10a6"><td class="mdescLeft">&#160;</td><td class="mdescRight">This message is used by the application to order the HTPT profile to generate an indication (if enabled) of the Measurement Interval Char. This can be done as the application desires, at each connection, or if the measurement interval value has been modified locally (interface for this is not provided since a normal thermometer would have very few configurable UI elements and configuration should be done through Collector) In response a <a class="el" href="at__ble__api_8h.html#a3324640b95f33169515f89738ed5baeba01220ffe1802556ff06810793137b97a">AT_BLE_HTPT_MEAS_INTV_UPD_RSP</a> event should be received.  <a href="#ga2808738edb6dbd353e562b235a4d10a6">More...</a><br /></td></tr>
<tr class="separator:ga2808738edb6dbd353e562b235a4d10a6"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<p>This group includes all HTPT APIs; Database Creation, Send Temperature, ... </p>
<h2 class="groupheader">Function Documentation</h2>
<a id="ga2f9864d034b157d76216d1b7284b568b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga2f9864d034b157d76216d1b7284b568b">&#9670;&nbsp;</a></span>at_ble_htpt_create_db()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__error__codes__group.html#ga3b1db9b95feb157b3c188ca27fe76988">at_ble_status_t</a> at_ble_htpt_create_db </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="at__ble__api_8h.html#af0538ef74570e97a4abdcc7263fdfcdd">at_ble_htpt_db_config_flag</a>&#160;</td>
          <td class="paramname"><em>features</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="at__ble__api_8h.html#a236445568b928ababcce95965c981348">at_ble_htpt_temp_type</a>&#160;</td>
          <td class="paramname"><em>temp_type</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>valid_range_min</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>valid_range_max</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>meas_intv</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="at__ble__api_8h.html#a3da24809ec703fda904a0a3b4c85e350">at_ble_htpt_sec_level</a>&#160;</td>
          <td class="paramname"><em>sec_lvl</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="at__ble__api_8h.html#abd23646d0c662860741f787efc8456f2">at_ble_handle_t</a> *&#160;</td>
          <td class="paramname"><em>start_handle</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This API message shall be used to add an instance of the Health Thermometer service into the database. This should be done during the initialization phase of the device , this is a blocking call and no events will be returned. </p>
<p>Note : allocated profile will be freed if device is reset or configuration changed <a class="el" href="group__gap__dev__config__group.html">Device Configuration APIs</a></p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">features</td><td>Indicate if optional features are supported or not, see <a class="el" href="at__ble__api_8h.html#af0538ef74570e97a4abdcc7263fdfcdd">at_ble_htpt_db_config_flag</a> </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">temp_type</td><td>type of temperature as defined in org.bluetooth.characteristic.temperature_type </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">valid_range_min</td><td>Minimal measurement interval value </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">valid_range_max</td><td>Maximal measurement interval value </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">meas_intv</td><td>Latest known value for measurement interval </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">sec_lvl</td><td>can be : Disable(0) , Enable(1), Unauth(2), Auth(3) see <a class="el" href="at__ble__api_8h.html#a3da24809ec703fda904a0a3b4c85e350">at_ble_htpt_sec_level</a> </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">start_handle</td><td>: handle of health thermometer service if creation succeeded</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Upon successful completion the function shall return <a class="el" href="group__error__codes__group.html#gga3b1db9b95feb157b3c188ca27fe76988a7e3bfff5387331cd4f2c56cbcbbd7e19">AT_BLE_SUCCESS</a>, Otherwise the function shall return <a class="el" href="at__ble__api_8h.html#ace24eb4e5ca3f325c663b809da5feb92">at_ble_status_t</a> </dd></dl>

</div>
</div>
<a id="ga1bac2afa579331c8bf3a7bf3715f4079"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga1bac2afa579331c8bf3a7bf3715f4079">&#9670;&nbsp;</a></span>at_ble_htpt_enable()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__error__codes__group.html#ga3b1db9b95feb157b3c188ca27fe76988">at_ble_status_t</a> at_ble_htpt_enable </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="at__ble__api_8h.html#abd23646d0c662860741f787efc8456f2">at_ble_handle_t</a>&#160;</td>
          <td class="paramname"><em>conn_handle</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="at__ble__api_8h.html#ae35b76480ab773fe13f5dfb9f78a4b28">at_ble_htpt_ntf_ind_cfg</a>&#160;</td>
          <td class="paramname"><em>ntf_ind_cfg</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This API message can be used after the connection with a peer device has been established in order to restore known device bond data, in response a <a class="el" href="at__ble__api_8h.html#a3324640b95f33169515f89738ed5baeba0217704aaf8283258dd02858769e6008">AT_BLE_HTPT_ENABLE_RSP</a> event should be received. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">conn_handle</td><td>handle of the connection </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">ntf_ind_cfg</td><td>Enable notifications or indications for profile characteristics see <a class="el" href="at__ble__api_8h.html#ae35b76480ab773fe13f5dfb9f78a4b28">at_ble_htpt_ntf_ind_cfg</a></td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Upon successful completion the function shall return <a class="el" href="group__error__codes__group.html#gga3b1db9b95feb157b3c188ca27fe76988a7e3bfff5387331cd4f2c56cbcbbd7e19">AT_BLE_SUCCESS</a>, Otherwise the function shall return <a class="el" href="at__ble__api_8h.html#ace24eb4e5ca3f325c663b809da5feb92">at_ble_status_t</a> </dd></dl>

</div>
</div>
<a id="ga2808738edb6dbd353e562b235a4d10a6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga2808738edb6dbd353e562b235a4d10a6">&#9670;&nbsp;</a></span>at_ble_htpt_meas_intv_update()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__error__codes__group.html#ga3b1db9b95feb157b3c188ca27fe76988">at_ble_status_t</a> at_ble_htpt_meas_intv_update </td>
          <td>(</td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>meas_intv</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This message is used by the application to order the HTPT profile to generate an indication (if enabled) of the Measurement Interval Char. This can be done as the application desires, at each connection, or if the measurement interval value has been modified locally (interface for this is not provided since a normal thermometer would have very few configurable UI elements and configuration should be done through Collector) In response a <a class="el" href="at__ble__api_8h.html#a3324640b95f33169515f89738ed5baeba01220ffe1802556ff06810793137b97a">AT_BLE_HTPT_MEAS_INTV_UPD_RSP</a> event should be received. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">meas_intv</td><td>Measurement Interval value</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Upon successful completion the function shall return <a class="el" href="group__error__codes__group.html#gga3b1db9b95feb157b3c188ca27fe76988a7e3bfff5387331cd4f2c56cbcbbd7e19">AT_BLE_SUCCESS</a>, Otherwise the function shall return <a class="el" href="at__ble__api_8h.html#ace24eb4e5ca3f325c663b809da5feb92">at_ble_status_t</a> </dd></dl>

</div>
</div>
<a id="ga4979577ecfab6b25dc76e2a448c65b37"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga4979577ecfab6b25dc76e2a448c65b37">&#9670;&nbsp;</a></span>at_ble_htpt_temp_send()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__error__codes__group.html#ga3b1db9b95feb157b3c188ca27fe76988">at_ble_status_t</a> at_ble_htpt_temp_send </td>
          <td>(</td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>temp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structat__ble__prf__date__time__t.html">at_ble_prf_date_time_t</a> *&#160;</td>
          <td class="paramname"><em>time_stamp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="at__ble__api_8h.html#accb2a3740dd79da6ab168adfa69c9548">at_ble_htpt_temp_flags</a>&#160;</td>
          <td class="paramname"><em>flags</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="at__ble__api_8h.html#a236445568b928ababcce95965c981348">at_ble_htpt_temp_type</a>&#160;</td>
          <td class="paramname"><em>type</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__group__sam0__utils.html#ga97a80ca1602ebf2303258971a2c938e2">bool</a>&#160;</td>
          <td class="paramname"><em>flag_stable_meas</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This message is used by the application (which handles the temperature device driver and measurements) to send a temperature measurement through the Thermometer role. In response a <a class="el" href="at__ble__api_8h.html#a3324640b95f33169515f89738ed5baeba918f0b91ca899278bb08d41cf98cb005">AT_BLE_HTPT_TEMP_SEND_CFM</a> event should be received. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">temp</td><td>temperature value </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">time_stamp</td><td>The time of reading according to the format defined in <a class="el" href="structat__ble__prf__date__time__t.html">at_ble_prf_date_time_t</a> </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">flags</td><td>temp flag see <a class="el" href="at__ble__api_8h.html#accb2a3740dd79da6ab168adfa69c9548">at_ble_htpt_temp_flags</a> </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">type</td><td>temp type see <a class="el" href="at__ble__api_8h.html#a236445568b928ababcce95965c981348">at_ble_htpt_temp_type</a> </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">flag_stable_meas</td><td>stable or intermediate type of temperature (True stable meas, else false), intermediate type is used for display purposes while the measurement is in progress</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Upon successful completion the function shall return <a class="el" href="group__error__codes__group.html#gga3b1db9b95feb157b3c188ca27fe76988a7e3bfff5387331cd4f2c56cbcbbd7e19">AT_BLE_SUCCESS</a>, Otherwise the function shall return <a class="el" href="at__ble__api_8h.html#ace24eb4e5ca3f325c663b809da5feb92">at_ble_status_t</a> </dd></dl>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.15 </li>
  </ul>
</div>
</body>
</html>
